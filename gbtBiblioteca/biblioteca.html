<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sistema de Biblioteca</title>
  <link rel="stylesheet" href="biblioteca.css">
  <script src="biblioteca.js"></script>
  
</head>
<body>
  <header id="menu">
    <h1>Sistema de Biblioteca</h1>
    <nav>
      <a href="#cadastro">1 - Cadastro</a>
      <a href="#livro">2 - Livro</a>
      <a href="#saida">3 - Saída de Livro</a>
    </nav>
  </header>

  <!-- 1. Cadastro -->
  <section id="cadastro">
    <h2>1 - Cadastro</h2>
    <form>
      <label for="nome">Nome:</label>
      <input type="text" id="nome" name="nome" required />

      <label for="matricula">Matrícula:</label>
      <input type="text" id="matricula" name="matricula" required />

      <label for="setor">Setor:</label>
      <input type="text" id="setor" name="setor" />

      <button type="submit">Cadastrar Usuário</button>
      <button type="button" class="secondary" onclick="location.href='#menu'">Voltar ao Menu Principal</button>
    </form>
  </section>

  <!-- 2. Livro -->
  <section id="livro">
    <h2>2 - Livro</h2>

    <!-- 2.1 Cadastro de Livro -->
    <div id="cad-livro">
      <h3>Cadastro de Livro</h3>
      <form>
        <label for="titulo">Título (Cadastro de Livro):</label>
        <input type="text" id="titulo" name="titulo" required />

        <label for="genero">Gênero Literário:</label>
        <input type="text" id="genero" name="genero" />

        <label for="autor">Autor:</label>
        <input type="text" id="autor" name="autor" />

        <label for="edicao">Edição:</label>
        <input type="text" id="edicao" name="edicao" />

        <button type="submit">Cadastrar Livro</button>
      </form>
    </div>

    <hr>

    <!-- 2.2 Pesquisa de Livro -->
    <div id="pesquisa-livro">
      <h3>Pesquisa de Livro</h3>

      <!-- Pesquisa por Autor -->
      <form id="pesquisa-autor" onsubmit="event.preventDefault();">
        <label for="pesq-autor">Pesquisar por Autor:</label>
        <input type="search" id="pesq-autor" name="pesq-autor" placeholder="Nome do autor" />
        <button type="button" onclick="pesquisar('autor')">Pesquisar Autor</button>
      </form>

      <!-- Pesquisa por Nome/Título -->
      <form id="pesquisa-nome" onsubmit="event.preventDefault();">
        <label for="pesq-titulo">Pesquisar por Título:</label>
        <input type="search" id="pesq-titulo" name="pesq-titulo" placeholder="Nome do livro / título" />
        <button type="button" onclick="pesquisar('titulo')">Pesquisar Título</button>
      </form>

      <p class="small">Dica: substitua as funções de pesquisa por chamadas ao seu backend / filtro de dados.</p>

      <hr>

      <!-- 2.3 Histórico de Saída -->
      <h3>Histórico de Saída</h3>
      <table id="historico-saidas">
        <thead>
          <tr>
            <th>Livro</th>
            <th>Matricula</th>
            <th>Data de Saída</th>
            <th>Data de Retorno</th>
            <th>Multa</th>
          </tr>
        </thead>
        <tbody>
          <!-- Exemplo de linhas; no sistema real será preenchido dinamicamente -->
          <tr>
            <td>Exemplo: Aprendendo JS</td>
            <td>2023001</td>
            <td>2025-10-01</td>
            <td>2025-10-08</td>
            <td>0,00</td>
          </tr>
        </tbody>
      </table>
    </div>

    <button type="button" class="secondary" onclick="location.href='#menu'">Voltar ao Menu Principal</button>
  </section>

  <!-- 3. Saída de Livro -->
  <section id="saida">
    <h2>3 - Saída de Livro</h2>
    <form id="form-saida" onsubmit="event.preventDefault(); calcularMulta();">
      <label for="livro-saida">Livro:</label>
      <input type="text" id="livro-saida" name="livro-saida" required />

      <label for="dataSaida">Data de Saída:</label>
      <input type="date" id="dataSaida" name="dataSaida" required />

      <label for="dataRetorno">Data de Retorno:</label>
      <input type="date" id="dataRetorno" name="dataRetorno" required />

      <label for="matriculaSaida">Matrícula:</label>
      <input type="text" id="matriculaSaida" name="matriculaSaida" required />

      <label for="multa">Multa por atraso (1% por dia sobre um valor de referência):</label>
      <!-- Aqui deixei campo de multa editável para facilitar testes; pode ficar readonly e calculado -->
      <input type="text" id="multa" name="multa" placeholder="Calculado automaticamente" readonly />

      <button type="submit">Registrar Saída</button>
      <button type="button" class="secondary" onclick="location.href='#menu'">Voltar ao Menu Principal</button>
    </form>
  </section>

  <script>
    // Função exemplo para disparar busca (apenas placeholder)
    function pesquisar(tipo) {
      if (tipo === 'autor') {
        const a = document.getElementById('pesq-autor').value.trim();
        alert('Pesquisar por autor: ' + (a || '[vazio]'));
      } else {
        const t = document.getElementById('pesq-titulo').value.trim();
        alert('Pesquisar por título: ' + (t || '[vazio]'));
      }
    }

    // Exemplo simples de cálculo de multa: 1% por dia de atraso sobre um valor base (ex: preço fictício)
    function calcularMulta() {
      const dataSaida = document.getElementById('dataSaida').value;
      const dataRetorno = document.getElementById('dataRetorno').value;
      if (!dataSaida || !dataRetorno) {
        alert('Preencha as datas de saída e retorno.');
        return;
      }

      const saida = new Date(dataSaida);
      const retorno = new Date(dataRetorno);
      // exemplo de valor base do livro (poderia ser um campo separado)
      const valorBase = 100.00;

      const diffTime = retorno - saida;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      // se a política for: prazo X dias, aqui só calculamos multa se retorno for maior que prazo.
      // Neste exemplo assumimos que 7 dias é o prazo sem multa:
      const prazo = 7;
      const atraso = Math.max(0, diffDays - prazo);
      const multa = (valorBase * 0.01 * atraso); // 1% por dia de atraso sobre valorBase

      document.getElementById('multa').value = (multa).toFixed(2);
      // opcional: aqui você poderia também adicionar a linha ao histórico, etc.
      alert('Multa calculada: R$ ' + (multa).toFixed(2) + ' (atraso ' + atraso + ' dias)');
    }
  </script>
</body>
</html>